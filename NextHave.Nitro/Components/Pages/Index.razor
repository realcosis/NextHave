@page "/"

@using NextHave.BL.Services.Users
@using NextHave.Nitro.Authentications

@inject NavigationManager navigation
@inject IUsersService usersService
@inject NextHaveAuthenticationStateProvider authenticationStateProvider

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            var authState = await authenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;

            if (user.Identity is { IsAuthenticated: true })
                navigation.NavigateTo("/game/nitro");
            else
                navigation.NavigateTo("/login");
        }
    }
}